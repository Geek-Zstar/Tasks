# Unity学习笔记 角色、组件、动画

### 一、角色创建

从这里开始，我深刻地感受到了C#与C++之间千丝万缕的关系，有一种【面向对象】的美。

#### 生成角色

生成一个角色很简单，只要新建一个2D对象即可。难的主要是将物理效果与游戏中反映的效果关联起来，需要一定的物理知识的。而当逻辑清晰后，如何实现也将造成比较明显的工作量。

#### 角色组件

由于角色需要频繁地与游戏场景进行交互，所以角色(**Player**)的属性，也就是组件格外的多。目前，角色被添加的组件主要有：

* **RigidBody 2D：**将角色变为实体。提供基础的重力作用，并有着十分真实的物理引擎模拟。当直接勾选此项后运行，会发现角色会像一个石子一样滚来滚去，这个时候，在此组件中固定Z轴，即可实现比较正经的角色显示效果。

* **Box Collider 2D**：提供一个矩形碰撞体积，同时决定了角色的”材质“，也就是摩擦力产生的原因。当直接勾选此项后运行，会发现角色可以趴在墙上不动，依照需求，只需在Assets文件夹中新建一个2D材质，将摩擦系数设置为0，并附加到角色的此组件上，即可解决。

* **Animator：**动画组件，任何一个有动画的对象都应该具有此组件。

* **CircleCollider 2D：**为角色提供一个圆形碰撞体积，为解决场景的分块碰撞体积会导致角色移动受阻的问题。教程说后续还有其他作用，学习之后再补充。

  > 补充：第一个问题还有一个解决方案就是将场景的分块碰撞体积合并，此处需要使用一个名叫**Composite Collider 2D**的组件

* **Script组件：**游戏制作过程中需要大量敲代码的组件。此组件是将场景与代码联系到一起的Key。其作用有点像Qt中的`ui`指针，编程方式也是极其相似。在此处敲代码主要使用Vs。

  * **问题一：**打开vs显示杂项文件。

    造成的影响是没法辅助编程了，很痛苦。不过解决方法也很简单，在`Edit->Preferences`中的编辑工具里，选择打开代码文件使用的编译器，手动进行关联即可。

  * **问题二：**跳跃动画无法实现。
  
    观看教程可知，老师在角色的动画切换函数中为`jumping`这个布尔值初始赋值为`false`。而这行代码是嵌套在`Void Update()`函数下的。据我了解，`Void Update()`是按帧数刷新的，也就意味着它会在极短的时间内多次持续被调用，这就导致了`jumping`不断地被赋值为`false`，也就无法稳定满足跳起动画的条件。将这行代码注释掉后，动画就可以正常实现了。
  

### 二、组件

#### 理解

组件是添加在游戏项目下的“属性”。在使用层面上，我觉得组件像是勇者的装备，有了盾就可以实现防御，有了剑就可以实现攻击。但究竟是攻击还是防御，还是由勇者自己决定。

#### 使用

组件的使用方法很简单，只要在控制器下面添加，就可以为对应游戏项目附加上想要的效果。比较值得深挖的点是不同组件之间的联动，以及在物理引擎模拟的作用下，组件之间是如何交互的。例如之前的“壁虎”bug，就是由于碰撞体积组件之间产生的摩擦力效果造成的。

#### 更多

待我学成归来，随时补充。

### 三、动画

#### 动画实现

1. 动画实现首先需要为游戏项目对象添加一个动画组件。

2. 其次，选中对应的游戏项目对象，在自己创建的`Animation`文件夹下为其新建一个`Animatior Controller`,
3. 接着就可以在`Animation`界面中新建动画了。
4. 动画新建好后，就需要在`Animator`界面中整理动画的触发条件以及结束条件。妥善处理每个动画之间的关系，保证逻辑上的正确性。

#### 注意点

动画的实现一般不会仅凭界面操作就可以实现，正常情况下是需要代码辅助的。这就可能对`parameter`有要求了。可能是`bool`类型，比如跳起，也可能是连续型，比如奔跑。但我觉得本质上就是`bool`类型，只要为奔跑的速度进行判断，将判断结果作为条件，还是`0||1 `这两种可能。

#### 动画之间的关系

在起始动画处新建一个条件指向需要的动画，条件的改变一般用代码实现。
