# C#学习笔记 属性、继承、接口

## 一、属性 

### 1. 属性定义

**属性**是代表类的实例或类中的一个数据项的成员。属性指的是一组两个匹配的、称为访问器的**方法**。

**方法**，即函数。

**字段** ，即类内部的私有成员，只能在内部使用，受保护，可以被引用。是一种成员变量。

**属性**，相当于一组对字段进行操作的方法，限制对字段的访问。可以简单理解为C++中对私有成员进行操作的函数。使用get访问器读取字段的值，使用set访问器改变字段的值。也是一种成员变量,但其是函数的成员。

#### set访问器 —— 写

- 拥有一个单独的、隐式的值参，名称为value， 其类型与属性的相同。
- set 访问器返回类型为void。

#### get访问器 —— 读

- 没有参数。
- 拥有一个与属性类型相同的返回类型。属性返回的类型要跟你要返回的字段的返回类型相同。

### 2. 使用属性

举例1：

```c#
       public double MyValue   
        {
            set
            {
                name = value; //返回类型为void
            }
            get
            {
                return name;  // 返回类型是属性的类型，属性的类型也要跟字段的数据类型一致
            }
        }
```

 写入和读取属性的访问器时，会被隐式调用：

* 要写入一个属性，在赋值语句的左边使用属性的名称。
* 要读取一个属性，把属性的名称用在表达式中。

**注意： 不能显式地调用访问器，就跟调用函数那样， 会出现编译错误。**

举例2:

```c#
class A
    {
        private  double nameField = 1.23;
        public double NameFild
        {
            set
            {
                nameField = value > 100 ? 100 : value;  //执行计算
            }
            get
            {
                return _nameField;
            }
        }
    }

```

### 3. 静态属性

和C++的静态部分异曲同工。

## 二、继承

思想是摒弃代码的冗余，实现更好的重用性。

#### 使用方法

* 子类使用`：`继承父类。
* 继承父类后，子类会隐式继承父类的所有成员，不包括构造函数。
* 子类访问父类成员会受到访问修饰符的限制。

#### 特性

* 一个子类只能有一个父类。但在C++里可以多重继承。C#只能单继承，也许是特色。
* 父类派生到子类，子类可以继续向下派生。

#### 构造函数

与C++一样，在调用子类的构造函数时，必须优先保证父类的构造函数是生效的。即子类始终要使用父类的一个构造函数在自己内部创建出一个父类对象。

#### 重写

* 子类继承的父类方法无法被子类直接调用，子类会优先调用父类方法，因此需要重写。

* 重写的父类方法时，必须指明被重写的方法是虚方法（关键字**virtual**），在子类重写父类方法时必须有重写关键字**override**，这样才能重写父类方法。

#### 重载

* 在方法前指定重载关键字**new**，父类方法不需关键字。
* 除了方法名字无法更改，其余一切都可更改，比如方法作用域、返回类型、方法体、方法参数等。

#### 其他注意点

在C#中，所有的类都直接或间接继承Object类。

[CSDN : Object类简介](http://t.csdn.cn/vTgT9http://t.csdn.cn/vTgT9)

## 三、接口

前面提到，C#中的继承仅支持单继承。那如何实现C++中的多重继承呢？就需要用到**接口**。一个类能同时实现多个接口，还能在实现接口的同时再继承其他类，并且接口之间可以继承。有点类似C++中的抽象类。

### 1. 接口定义语法

```C#
interface 接口名称
{
    接口成员;
}
```

* 规范代码，接口名称一般以 **I** 开头。

* 在代码中，接口与类应该是齐平的位置。

* 接口中定义的成员与类中定义的成员类似。

  接口中定义的成员必须满足以下要求：

  * 接口中的成员不允许使用 public、private、protected、internal 访问修饰符。

  * 接口中的成员不允许使用 static、virtual、abstract、sealed 修饰符。

  * 在接口中不能定义字段。

  * 在接口中定义的方法不能包含方法体。具体的实现要在被继承的类中进行重写。

### 2. 接口实现

接口的实现是通过继承的方式进行实现。

接口实现需要注意的地方：

- 接口继承接口之后具有父接口的全部成员。
- 类继承接口之后需要实现接口的全部成员方法。否则需要将该类定义为抽象类。
- 未实现的接口方法定义为抽象方法。
- 继承时基类和接口之间，接口和接口之间以逗号分隔。

#### 显式实现接口

显式实现接口需要使用接口名作为方法名的前缀。

**注意事项**：

1. 显式实现接口时不需要指定访问修饰符。

2. 显式实现的接口在调用时**必须使用接口对象**。

比如一个修改学生类显式实现接口的例子:

```c#
interface IWorker
{
    void DOwork();
}
//Student类继承于一个Person类和IWorker接口
class Student:Person,IWorker
{
    // 省略
//实现从接口继承的方法
    void IWorker.DoWork()
   {
        Console.WriteLine("在学习");
   }
}

Student stu = new Student();
stu.DoWork(); //无法调用

IWorker worker = new Student();
worker.DoWork();
```
#### 隐式实现接口

对于隐式实现的成员，既可以通过类对象]实例来访问，也可以通过接口来访问。

隐式实现接口不需要使用接口名作为方法名的前缀，但需要添加访问修饰符public

修改上述的例子：

```c#
interface IWorker
{
    void DOwork();
}
//Student类继承于一个Person类和IWorker接口
class Student:Person,IWorker
{
    // 省略
//实现从接口继承的方法
    public void DoWork()
   {
        Console.WriteLine("在学习");
   }
}
Student stu = new Student();
stu.DoWork(); //可以调用

IWorker worker = new Student();
worker.DoWork();
```

#### 总结

- 当类实现一个接口时，通常使用隐式接口实现，这样可以方便的访问接口方法和类自身具有的方法和属性。
- 当类实现多个接口时，并且接口中包含相同的方法名，此时使用显式接口实现。
- 隐式接口实现，类和接口都可访问接口中方法。显式接口实现，只能通过接口访问。

### 3. 接口中的多态

多态能使用类之间的继承关系来实现，通过多个类继承同一个接口，并实现接口中的成员也能完成多态的表示。

使用接口实现多态 需要满足以下两个条件。

- 定义接口并使用类实现了接口中的成员。
- 创建接口的实例指向不同的实现类对象。

## 四、总结

C#和C++很多概念名称不一样，但总体上很相似。继承方面有共性也有个性，使用方面大体上无差距。主要的区别在于接口，而接口主要是提供一个限制，如何访问，仅仅是一个方法论；而++中的抽象类则是一种哲学上的包含关系思想。







###### 参考资料

<iframe src="//player.bilibili.com/player.html?aid=939552582&bvid=BV1XW4y1k7WA&cid=734079278&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

[CSDN: C# 字段、属性和成员变量的区别](http://t.csdn.cn/d6gl4)

[CSDN: 继承详解](http://t.csdn.cn/YsgbV)

[CSDN: Object类简介](http://t.csdn.cn/GIhnv)

[CSDN: C#中继承实现父类方法、重写、重载](http://t.csdn.cn/EtuAg)

[CSDN: C# 接口](http://t.csdn.cn/3GApL)

[CSDN: C#接口实现的方式](http://t.csdn.cn/M4VxP)
